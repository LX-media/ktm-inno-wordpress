stEnableFieldValues={},!0;var n=!1,o=T()(this,"props.moduleAttrs",{}),r=T()(this,"props.activeTabMode","desktop"),i=ae.a.isHoverMode()&&ae.a.isEnabled(this.baseName+"_color",o);j()(e,function(e,a){if(!F()([t.baseName+"_color",t.baseName+"_image"],a)){var s=i?ae.a.getHoverField(e):se.a.getFieldName(e,r),l=i?ae.a.getHoverField(a):se.a.getFieldName(a,r);t._lastEnableFieldValues[a]!==o[l]&&(k()(o[l])?t._lastEnableFieldValues[a]=void 0:t._setCacheEnabledValue(a,o[l],!0),t._enableFieldValues[a]=void 0,n=F()([t.baseName+"_use_color_gradient",t.baseName+"_image"],a)),e!==a&&t._lastEnableFieldValues[e]!==o[s]&&(k()(o[s])?t._lastEnableFieldValues[e]=void 0:t._setCacheEnabledValue(e,o[s],!0),t._enableFieldValues[a]=void 0)}}),n&&!this._isImageAttrsUpdated&&this.setState({imagePreviewAttrs:this._getImagePreviewAttrs()})}},{key:"_getAttrs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=k()(e)?T()(this,"props.moduleAttrs",{}):T()(this,"props.moduleAttrs."+this.baseName+"_"+e);!k()(e)&&t&&k()(r)&&(r=this._getDefault(this.baseName+"_"+e));var i=T()(this,"props.moduleAttrs",{}),a=this._getDefault(this.baseName+"_"+e),s=this._getEnabledPreviewMode();if(x()(this.enableFields,this.baseName+"_"+e)&&!o)return T()(this._getEnabledBackgroundValue(this.baseName+"_"+e),"value","");if("hover"===s&&!o){var l=n?T()(i,this.baseName+"_"+e,a):"";return T()(i,ae.a.getHoverField(this.baseName+"_"+e))||l}return"desktop"===s||o?r:se.a.getAnyValue(i,this.baseName+"_"+e,a,n,s)}},{key:"_getDefault",value:function(e){var t=e,n=this.props.moduleAttrs,o=this._getEnabledPreviewMode(),r=T()(this,"props.background_fields."+t+".default");if("hover"===o){var i=T()(this,"props.background_fields."+t+".default"+ae.a.hoverSuffix()),a=T()(this,"props.moduleAttrs."+t,r);return Y.default.get(i,a)}se.a.isMobile(this.props);if("desktop"!==o){var s=se.a.getActiveSettingName("default",this.props),l=T()(this,"props.background_fields."+t+"."+s,"");if(""===l){var u=T()(this.props,"activeTabMode","desktop"),c=se.a.getPreviousDevice(u);r=se.a.getAnyValue(n,""+t,r,!0,c)}else r=l}return r}},{key:"_getImagePreviewAttrs",value:function(){var e=this._getAttrs("color"),t=this._getAttrs("size"),n=this._getAttrs("position"),o=this._getAttrs("repeat"),r=this._getAttrs("blend"),i=this._getAttrs("parallax"),a=!!Y.default.isOn(this._getAttrs("use_color_gradient"))&&Y.default.getGradient({type:this._getAttrs("color_gradient_type"),direction:this._getAttrs("color_gradient_direction"),radialDirection:this._getAttrs("color_gradient_direction_radial"),colorStart:this._getAttrs("color_gradient_start"),colorEnd:this._getAttrs("color_gradient_end"),startPosition:this._getAttrs("color_gradient_start_position"),endPosition:this._getAttrs("color_gradient_end_position")}),s=this._getAttrs("color_gradient_overlays_image");return{color:Y.default.hasValue(e)?e:this._getDefault(this.baseName+"_color"),size:Y.default.hasValue(t)?t:this._getDefault(this.baseName+"_size"),position:Y.default.hasValue(n)?n:this._getDefault(this.baseName+"_position"),repeat:Y.default.hasValue(o)?o:this._getDefault(this.baseName+"_repeat"),blend:Y.default.hasValue(r)?r:this._getDefault(this.baseName+"_blend"),parallax:Y.default.isOn(i),gradient:a,gradientOverlaysImage:s}}},{key:"_getEnabledPreviewMode",value:function(){var e=T()(this,"props.moduleAttrs",{}),t=T()(this,"props.activeTabMode","desktop"),n=se.a.isMobile(this.props);return ae.a.isHoverMode()&&ae.a.isEnabled(this.baseName+"_color",e)?"hover":n?t:"desktop"}},{key:"_getEnabledPreviewSuffix",value:function(){var e=this._getEnabledPreviewMode(),t="";return"hover"===e?t=ae.a.hoverSuffix():"desktop"!==e&&(t="_"+e),t}},{key:"_getFieldWithSuffix",value:function(e){var t=this._getEnabledPreviewMode();return"hover"===t?ae.a.getHoverField(e):se.a.getFieldName(e,t)}},{key:"_isFieldExist",value:function(e){return F()(this.fieldsNames,e)}},{key:"_isVisible",value:function(e,t){var n=this,o=[],r=this.props.moduleAttrs,i=this._getEnabledPreviewMode(),a=this._getEnabledPreviewSuffix();return j()(e.depends_on,function(s){var l=s;if(s=""+s+a,T()(t[s],"depends_on",!1)&&!n._isVisible(t[s],t))return!1;var u="hover"===i?T()(r,s,T()(r,l)):se.a.getAnyValue(r,s,"",!0);x()(n.enableFields,l)&&(u=T()(n._getEnabledBackgroundValue(l,u),"value",u));var c=u||T()(n,"props.backgroundFields."+l+".default");k()(e.depends_show_if)||c!==e.depends_show_if||o.push(s),k()(e.depends_show_if_not)||c===e.depends_show_if_not||o.push(s)}),!v()(o)}},{key:"_isTabFilled",value:function(e){var t=!1;switch(e){case"color":Y.default.hasValue(this._getAttrs("color"))&&(t=!0);break;case"gradient":Y.default.isOn(this._getAttrs("use_color_gradient"))&&(t=!0);break;case"image":Y.default.hasValue(this._getAttrs("image"))&&(t=!0);break;case"video":(Y.default.hasValue(this._getAttrs("video_mp4"))||Y.default.hasValue(this._getAttrs("video_webm")))&&(t=!0)}return t}},{key:"_isInheritanceMainBackgroundModified",value:function(e){var t=T()(this,"props.activeTabMode","desktop");if(k()(this.mainTabField[e])||"desktop"===t)return!1;var n=T()(this,"props.moduleAttrs",{}),o=this._getEnabledPreviewMode(),r=this.mainTabField[e],i=!1;return j()(r,function(e){var r="";if("hover"===o?r=T()(n,ae.a.getHoverField(e),""):"desktop"!==o&&(r=se.a.getAnyValue(n,e+"_"+t)),""!==r)return i=!0,!1}),i}},{key:"_onSwitchTab",value:function(e){e.preventDefault(),this.setState({activeTab:e.target.getAttribute("data-tab")})}},{key:"_onResetGradient",value:function(e){var t=this;if(e.preventDefault(),e.stopPropagation(),!this.props.readonly){var n=[this.baseName+"_color_gradient_start",this.baseName+"_color_gradient_end",this.baseName+"_use_color_gradient"];j()(n,function(e){var n=t._getFieldWithSuffix(e);t._onChange(n,"",void 0,void 0,!0)})}}},{key:"_onResetDynamic",value:function(e,t,n){var o=this._getEnabledPreviewMode(),r=e;"hover"===o?r=ae.a.getHoverField(e):"desktop"!==o&&(r=se.a.getActiveSettingName(e,this.props)),this._onChange(r,"",n,!1),this._onEnableBackgroundSetting(r,t)}},{key:"_onToggleFirstGradientColorpicker",value:function(e){if(e.preventDefault(),e.stopPropagation(),!this.props.readonly){var t="color_gradient_start"+(k()(this.props.columnIndex)?"":"_"+this.props.columnIndex);this._registerGradientColorManager(t)}}},{key:"_registerGradientColorManager",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=Y.default.$appWindow(l.a.findDOMNode(this)),r=k()(this.props.columnIndex)?"":"_"+this.props.columnIndex;n&&this.setState({gradientOpened:""+e});var i=o.find(".et-fb-settings-option-color--gradient-preview-manager"+r+" .wp-color-picker");i.wpColorPicker("open",!0),Y.default.$topDocument().on("click.etClickOutsideColorpicker",function(e){if(t._isGradientColorManagerArea(e))return!1;i.wpColorPicker("close")})}},{key:"_onCloseGradientManagerColorPicker",value:function(e){!v()(this.state.gradientOpened)&&this._isGradientColorManagerArea(e)&&(this.setState({gradientOpened:null}),this._isGradientPreviewClosed=!0)}},{key:"_onCloseGradientSelectColorPicker",value:function(e){if(v()(this.state.gradientOpened))return!1;var t=!1,n=T()(Y.default.$topDocument().data("events"),"click",[]);j()(n,function(e){if("etClickOutsideColorpicker"===e.namespace)return t=!0,!1}),t||this._registerGradientColorManager("",!1)}},{key:"_onClickSelectColor",value:function(e,t){t.wpColorPicker("close");var n=T()(e,"context.id","");if(v()(n)||!C()(n))return!1;var o=this._getFieldPureName(n.replace(/et-fb-|_preview/gi,""));if(!z()(o,"color_gradient_start")&&!z()(o,"color_gradient_end"))return!1;var r=this._lastGradientPreviewOpen;if(this._lastGradientPreviewOpen=o,Y.default.$appWindow(l.a.findDOMNode(this)).find(".et-fb-form__group--"+o+" .wp-color-picker").wpColorPicker("close"),v()(this.state.gradientOpened)&&this._isGradientPreviewClosed&&r===o)return this._isGradientPreviewClosed=!1,!1;this.state.gradientOpened!==o&&this._registerGradientColorManager(o)}},{key:"_isGradientColorManagerArea",value:function(t){var n=!k()(t.target)&&t.target?Y.default.$appWindow(t.target):t;if(n instanceof e==!1)return!1;var o="et-fb-settings-option-color--gradient-preview-manager--active";return!!(n.hasClass(o)||n.parents("."+o).length>0)}},{key:"_onSwapGradientColor",value:function(e){if(e.preventDefault(),e.stopPropagation(),!this.props.readonly){var t=this._getAttrs("color_gradient_start",!0),n=this._getAttrs("color_gradient_end",!0);this._onChange(this.baseName+"_color_gradient_start",n),this._onChange(this.baseName+"_color_gradient_end",t)}}},{key:"_onChange",value:function(e,t,n,o,r){var i=e;if(!F()(["_dynamic_attributes"],e)){var a=this._getEnabledPreviewMode();"hover"===a?i=ae.a.getHoverField(e):"desktop"!==a&&(i=se.a.getActiveSettingName(e,this.props))}this.props._onChange(i,t,n,o,r),t&&this._onEnableBackgroundSetting(i,"activate"),this.forceUpdate();var s=G()([this.baseName+"_color",this.baseName+"_parallax"],this.fieldsStructure.gradient,this.fieldsStructure.image);F()(s,e)&&(this._isImageAttrsUpdated=!0,this.setState({imagePreviewAttrs:this._getImagePreviewAttrs()}))}},{key:"_onEnableBackgroundSetting",value:function(e,t){var n=this._getEnabledPreviewMode(),o="activate"===t,r="delete"===t,i="reset"===t,a=e;"hover"===n?a=ae.a.getFieldBaseName(e):"desktop"!==n&&(a=se.a.getFieldBaseName(e));var s=T()(this.enableFields,a,"");if(""!==s&&(!o||F()([this.baseName+"_color",this.baseName+"_image"],a))){(r||i)&&this._maybeResetCacheEnabledValue(!1,!0);var l=this._getFieldWithSuffix(s);if(""!==l){this.props._onChange(l,T()({activate:"on",delete:"off",reset:""},t,"")),$.a.isCustomDefaultsMode()&&"desktop"===n&&i&&(this.props._onChange(l,this._getDefault(s)),this.props._onChange(this._getFieldWithSuffix(a),this._getDefault(a)))}}}},{key:"_onPreviewMouseEnter",value:function(){this.setState({isPreviewHover:!0});var e=this.props.onMouseEnterGroup;if(e){var t=ETBuilderBackend.i18n.controls.background.gradientColors;e("hover"===this._getEnabledPreviewMode()?ae.a.getFieldBaseName(this.props.name):se.a.getFieldBaseName(this.props.name),t,"background-gradient",this.props.toggle_slug,this.props.tab_slug)}}},{key:"_onPreviewMouseLeave",value:function(){this.setState({isPreviewHover:!1});var e=this.props.onMouseLeaveGroup;e&&e(!1,"")}},{key:"_renderGradientPreview",value:function(){var e,t=this,n=this._getEnabledBackgroundValue(this.baseName+"_use_color_gradient","","",!1).value,o={active:Y.default.isOn(n),type:this._getAttrs("color_gradient_type"),direction:this._getAttrs("color_gradient_direction"),radialDirection:this._getAttrs("color_gradient_direction_radial"),colorStart:this._getAttrs("color_gradient_start"),colorEnd:this._getAttrs("color_gradient_end"),startPosition:this._getAttrs("color_gradient_start_position"),endPosition:this._getAttrs("color_gradient_end_position"),overlaysImage:this._getAttrs("color_gradient_overlays_image")},r={active:Y.default.isOn(this._getDefault(this.baseName+"_use_color_gradient")),colorStart:this._getDefault(this.baseName+"_color_gradient_start"),colorEnd:this._getDefault(this.baseName+"_color_gradient_end")},i=Y.default.isOn(n),s=V()(r,function(e,t){return o[t]===e}),l=k()(this.props.columnIndex)?"":"_"+this.props.columnIndex,u=this.state.gradientOpened,d=this.baseName+"_"+u,p=this._getAttrs(""+this._getFieldBaseName(u))||this._getAttrs(""+this._getFieldBaseName("color_gradient_start")),h=!k()(u)&&!v()(u),g=i?{backgroundImage:Y.default.getGradient(o)}:{},m={opacity:this.state.isPreviewHover?Object(f.spring)(1,{stiffness:300,damping:20}):Object(f.spring)(0,{stiffness:300,damping:20}),scale:this.state.isPreviewHover?Object(f.spring)(1,{stiffness:300,damping:20}):Object(f.spring)(0,{stiffness:300,damping:20}),top:this.state.isPreviewHover?Object(f.spring)(0,{stiffness:300,damping:20}):Object(f.spring)(-30,{stiffness:300,damping:20})},b=!i&&a.a.createElement(re.a,{title:ETBuilderBackend.i18n.controls.background.addGradient,className:"et-fb-button et-fb-settings-option-add",onClick:this._onAddGradient}),y=!!i&&a.a.createElement(f.Motion,{style:m},function(e){return a.a.createElement("button",{className:"et-fb-button et-fb-settings-option-remove",onClick:t._onRemoveGradient,style:{opacity:e.opacity,transform:"scale( "+e.scale+" )",top:e.top}},a.a.createElement(X.a,{icon:"delete",color:"#fff"}))}),_=!s&&i?a.a.createElement(f.Motion,{style:m},function(e){return a.a.createElement("button",{className:"et-fb-button et-fb-settings-option-reset",onClick:t._onResetGradient,style:{opacity:e.opacity,transform:"scale( "+e.scale+" )",top:e.top}},a.a.createElement(X.a,{icon:"reset",color:"#fff"}))}):"",w=i?a.a.createElement(f.Motion,{style:m},function(e){return a.a.createElement("button",{className:"et-fb-button et-fb-settings-option-swap",onClick:t._onSwapGradientColor,style:{opacity:e.opacity,transform:"scale( "+e.scale+" )",top:e.top}},a.a.createElement(X.a,{icon:"swap",color:"#fff"}))}):"",C=i?a.a.createElement(Q.a,{name:d,value:p,type:"color-alpha",module:T()(this,"props.module"),_onChange:this._onChange,animate:!0,disableCurrent:!0,onCloseColorPicker:this._onCloseGradientManagerColorPicker}):"",E=i?this._onToggleFirstGradientColorpicker:this._onAddGradient;return a.a.createElement("div",{className:c()((e={},pe(e,"et-fb-settings-option-color--gradient-preview-manager"+l,!0),pe(e,"et-fb-settings-option-color--gradient-preview-manager--active",h),e))},a.a.createElement("div",{className:c()({"et-fb-settings-option-preview":!0,"et-fb-settings-option-preview--empty":!i}),style:g,onClick:E,onMouseEnter:this._onPreviewMouseEnter,onMouseLeave:this._onPreviewMouseLeave},b,a.a.createElement("div",{className:"et-fb-settings-option-preview__buttons-wrapper"},w,y,_)),C)}},{key:"_renderTabNavs",value:function(){var e=this,t="et-fb-settings-background-tab-nav",n=this._getActiveTab(),o=(T()(this,"props.name","background"),this._onSwitchTab);return N()(this.tabNames,function(r){var i=t+"--"+r,s=[t,i],l=n===r||e._isTabFilled(r)?ie.a.info:ie.a.inactiveGrey;return n===r&&s.push(t+"--active"),a.a.createElement("li",{key:i},a.a.createElement("button",{className:c()(s),"data-tab":r,onClick:o,name:r,onMouseEnter:e._onTabMouseEnter,onMouseLeave:e._onTabMouseLeave},a.a.createElement(X.a,{icon:"background-"+r,color:l})))})}},{key:"_renderTabs",value:function(){var e=this,t=this._getActiveTab();return N()(this.tabNames,function(n){if(n===t){var o="et-fb-settings-background-tab--"+n,r=["et-fb-settings-background-tab",o],i="gradient"===n?e._renderGradientPreview():"";return n===t&&r.push("et-fb-settings-background-tab--active"),a.a.createElement("div",{className:c()(r),key:o},i,e._renderTabFields(n))}})}},{key:"_renderTabFields",value:function(e){var t=this,n=this.backgroundFields,o=this.props.moduleAttrs,r=[],s=T()(this.props,"name","background");return N()(this.fieldsStructure[e],function(l){var u,d=n[l];if(k()(d))return"";var p=se.a.isMobile(t.props),f="use_background_color"===l?l:ae.a.getCompositeFieldOnHover(l,s,o),h=t._getDefault(l);p&&(f=se.a.getActiveSettingName(l,t.props));var m=p?se.a.getAnyValue(o,f,d.default,!0):Y.default.get(o[f],t._getDefault(f)),v=p?se.a.getDefaultValue(o,f,d.default):t._getDefault(f);if(!k()(t.enableFields[l])){var b=t._getEnabledBackgroundValue(l,m,v);m=T()(b,"value",m),v=T()(b,"default",v)}var _={name:f,backgroundBase:t.baseName+"_color"};k()(h)||(_.default=h),F()(["color","color-alpha"],d.type)?F()([t.baseName+"_color_gradient_start",t.baseName+"_color_gradient_end"],d.name)?_.updateChangeTab=!0:t.baseName+"_color"===d.name&&(_.showResetButton=!0):"upload"===d.type&&(_.showResetButton=m!==v,_.showDeleteButton=!0);var w=d.type;F()(["custom_margin","custom_padding"],w)&&(_.mobile_options=!1),"upload"===w&&"video"!==d.data_type&&(_.toggle_slug="background");if(t._isFieldExist(l)&&"skip"!==d.type){if("warning"===d.type&&d.display_if!==d.value)return!1;if(k()(fe[w]))return!1;if(!k()(d.depends_on)&&!t._isVisible(d,n))return r.push(d.name),!1;if(!k()(d.depends_on)&&y()(d.depends_on,g()(d.depends_on,r)))return!1;var C=c()(["et-fb-settings-options","et-fb-option--"+w.replace("_","-")]);k()(d.depends_default)&&k()(d.depends_show_if)&&k()(d.depends_show_if_not)||(C=c()("et-fb-option--depends-on",C));var E=!k()(d.description)&&""!==d.description,S=k()(d.label)||""===d.label?"":a.a.createElement(J.c,{name:d.name,activeHelp:t.props.isDescriptionVisible(d.name),hoveredGroup:t.props.isHoveredGroup(d.name),key:"general-form-label-"+l,onClickHelp:!!E&&t.props.onClickHelp,onToggleRightMenu:t.props.onToggleRightMenu,isResetActive:t.props.isResetActive(ce({},d,_)),onClickReset:t.props.onClickReset,backgroundBase:t.baseName+"_color"},d.label),O=E?a.a.createElement(J.a,{active:t.props.isDescriptionVisible(d.name),key:"general-form-description-"+l},d.description):"",M=!(!F()(["color","color-alpha","upload"],w)||F()([t.baseName+"_color_gradient_start",t.baseName+"_color_gradient_end"],d.name)),x=!(!F()(["color","color-alpha"],w)||F()([t.baseName+"_color_gradient_start",t.baseName+"_color_gradient_end"],d.name));x&&(_.isFieldEnabled=!k()(t.enableFields[l])&&Y.default.hasValue(m));var D=!!F()(["color","color-alpha"],w);F()([t.baseName+"_color_gradient_start",t.baseName+"_color_gradient_end"],d.name)&&(_.onClickSelectColor=t._onClickSelectColor,_.onCloseColorPicker=t._onCloseGradientSelectColorPicker,_.name=f+"_preview");var N=t.baseName+"_image"===l?t.state.imagePreviewAttrs:void 0,P="";switch(w){case"color":case"color-alpha":P=ETBuilderBackend.i18n.controls.background.addColor;break;case"upload":P="video"===d.data_type?ETBuilderBackend.i18n.controls.background.addVideo:ETBuilderBackend.i18n.controls.background.addImage}var A=T()(d,"data_type",!1),I=d.type+(A?"_"+A:""),j=Object(i.createElement)(fe[w],L()({key:l,value:m,className:void 0,module:T()(t,"props.module"),moduleAttrs:o,content:"",resetValue:!1,previewMode:"",_onChange:t._onChange,_onEnableBackgroundSetting:t._onEnableBackgroundSetting,hasPreview:M,hasColorManager:x,animate:D,imagePreviewAttrs:N,tab:e,isBackgroundType:!0,addTitle:P,isResponsive:t.props.isResponsive,activeTabMode:t.props.activeTabMode},d,_));if("upload"===w&&"video"!==d.data_type){var R=Object(ue.e)(o);Object(ue.g)(m)&&!F()(R,f)&&R.push(f),j=a.a.createElement(le.a,{key:l,type:"image",fieldName:f,fieldType:d.type,previewMode:"background",previewAttributes:N,value:m||"",dynamicAttributes:R,onChange:t._onChange,onReset:function(e){return t._onResetDynamic(e,"delete",d.type)},onInherit:function(e){return t._onResetDynamic(e,"reset",d.type)},showInheritButton:t._isInheritanceMainBackgroundModified("image")},j)}return a.a.createElement(J.b,{name:d.name,className:c()((u={},pe(u,"et-fb-form__group--"+l.replace(t.baseName,"background"),!0),pe(u,"et-fb-form__group--gradient-preview-manager","gradient"===e&&F()(["color","color-alpha"],w)),u)),key:"general-form-group-"+l,onMouseEnterGroup:function(){t.props.onMouseEnterGroup(d.name,d.label,I,t.props.toggle_slug,t.props.tab_slug)},onMouseLeaveGroup:function(){t.props.onMouseLeaveGroup(d.name,d.label)},_unsyncGlobalSetting:d._unsyncGlobalSetting,isGlobalOptionSynced:d.isGlobalOptionSynced,isSelectiveSyncAvailable:d.isSelectiveSyncAvailable},S,O,a.a.createElement("div",{className:C,key:"et-fb-option-advanced_"+l},a.a.createElement("div",{className:"et-fb-option-container",key:"et-fb-option-container-"+l},j)))}})}},{key:"render",value:function(){var e=c()(["et-fb-settings-background-tab-navs","et-fb-settings-background-tab-navs-items--"+this.tabNames.length]);return a.a.createElement("div",null,a.a.createElement("ul",{className:e},this._renderTabNavs()),a.a.createElement("div",{className:"et-fb-settings-background-tabs"},this._renderTabs()))}}]),n}();he.propTypes={_onChange:r.a.func,additional_code:r.a.string,content:r.a.oneOfType([r.a.array,r.a.string]),default:r.a.oneOfType([r.a.bool,r.a.string]),depends_show_if:r.a.string,depends_on:r.a.array,description:r.a.string,label:r.a.string,module:r.a.object,moduleAttrs:r.a.object,name:r.a.string,type:r.a.string,value:r.a.oneOfType([r.a.bool,r.a.string]),background_fields:r.a.object,onMouseEnterGroup:r.a.func,onMouseLeaveGroup:r.a.func,isDescriptionVisible:r.a.func,isHoveredGroup:r.a.func,onClickHelp:r.a.func,toggle_slug:r.a.string,tab_slug:r.a.string},t.a=he}).call(this,n(31))},function(e,t,n){"use strict";(function(e){var o=n(1),r=n.n(o),i=n(21),a=n.n(i),s=n(1292),l=n.n(s),u=n(18),c=n.n(u),d=n(4),p=n.n(d),f=n(44),h=n.n(f),g=(n(43),n(42)),m=n.n(g),v=n(210),b=n.n(v),y=n(477),_=n.n(y),k=n(370),w=n.n(k),C=n(29),E=n.n(C),S=n(211),O=n.n(S),T=(n(1295),n(32)),M=n(35),x=n(0),D=n(1170),N=n(2),P=n.n(N),F=n(58),A=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var L=function(e,t){return 0===E()(e).length?t:e},I=function(e,t){if(""===e&&!t)return"";var n,o=w()(e,"|"),r=(n=o,Array.isArray(n)?n:Array.from(n)),i=r[0],a=r.slice(1);return[i||"on"].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(a))},j=function(e,t){return b()(_()(I(e),I(t,!0),L),"|")},R=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t._onCornerChange=O()(function(e,n){var o=x.default.intentionallyCloneDeep(t._getValues());t._lastValue=n,o[e]=n,t.setState({inputValues:o}),t._onChange(e)});var o=j(t.props.value,t._getDefaultValue());return t.state={inputValues:t._splitValue(o)},t._values=t._splitValue(o),t._lastValue="",t._onChange=t._onChange.bind(t),t._onClickLink=t._onClickLink.bind(t),t._onResize=t._onResize.bind(t),t._onTopLeftChange=t._onCornerChange("top-left").bind(t),t._onTopRightChange=t._onCornerChange("top-right").bind(t),t._onBottomLeftChange=t._onCornerChange("bottom-left").bind(t),t._onBottomRightChange=t._onCornerChange("bottom-right").bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r.a.Component),A(n,[{key:"componentWillReceiveProps",value:function(e){var t=""!==e.value||!e.isResponsive&&!e.activeHover||p()(e.default)?e.value:e.default,n=j(t,this._getDefaultValue());this._values=this._splitValue(n),this.setState({inputValues:this._splitValue(n)})}},{key:"shouldComponentUpdate",value:function(e,t){return j(e.value,this._getDefaultValue())!==this.props.value||!m()(this.state.inputValues,t.inputValues)||!(!this.props.isResponsive||this.props.activeTabMode===e.activeTabMode)}},{key:"componentDidMount",value:function(){this._onResize(),this._onChange=this._onChange.bind(this)}},{key:"_onResize",value:function(){var t=e(a.a.findDOMNode(this.refs.radiusPreview)),n=t.innerHeight(),o=t.innerWidth(),r='"data:image/svg+xml,%3Csvg%20width%3D%27'+o+"%27%20height%3D%27"+n+"%27%20viewBox%3D%270%200%20"+o+"%20"+n+"%27%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%3E%3Cline%20x1%3D%270%27%20y1%3D%270%27%20x2%3D%27"+o+"%27%20y2%3D%27"+n+"%27%20style%3D%27stroke%3A%23f1f5f9%3Bstroke-width%3A2%27%20/%3E%3Cline%20x1%3D%270%27%20y1%3D%27"+n+"%27%20x2%3D%27"+o+'%27%20y2%3D%270%27%20style%3D%27stroke%3A%23f1f5f9%3Bstroke-width%3A2%27%20/%3E%3C/svg%3E"';t.css("background","#FFFFFF url("+r+")")}},{key:"_isLinkedMode",value:function(){return this._getSettingValue("border-link")}},{key:"_onChange",value:function(e){var t=void 0,n=F.a.sanitizeInputUnit(this._lastValue),o=this._getDefaultSettingValue(e);(n===o||""===o&&"0px"===n)&&(n=""),this._isLinkedMode()?t=this._spreadValue(n):(t=this._getValues())[e]=n,this.props._onChange(this.props.name,this._combineValues(t)),this.setState({inputValues:t})}},{key:"_spreadValue",value:function(e){return{"border-link":!0,"top-left":e,"top-right":e,"bottom-right":e,"bottom-left":e}}},{key:"_onClickLink",value:function(){if(!this.props.readonly)if(this._getSettingValue("border-link")){var e=this._getValues();e["border-link"]=!1,this.props._onChange(this.props.name,this._combineValues(e))}else{""===this._lastValue&&(this._lastValue=this._getSettingValue("top-left"));var t=this._spreadValue(this._lastValue);this.props._onChange(this.props.name,this._combineValues(t)),this.setState({inputValues:t})}}},{key:"_combineValues",value:function(e){return(e["border-link"]?"on":"off")+"|"+e["top-left"]+"|"+e["top-right"]+"|"+e["bottom-right"]+"|"+e["bottom-left"]}},{key:"_splitValue",value:function(e){var t=h()(e)?e:e.split("|");return{"border-link":!!p()(t[0])||x.default.isOn(t[0]),"top-left":p()(t[1])||""===t[1]?"":t[1],"top-right":p()(t[2])||""===t[2]?"":t[2],"bottom-right":p()(t[3])||""===t[3]?"":t[3],"bottom-left":p()(t[4])||""===t[4]?"":t[4]}}},{key:"_getDefaultValue",value:function(){return p()(this.props.default)||""===this.props.default?"on||||":this.props.default}},{key:"_getDefaultSettingValue",value:function(e){return this._splitValue(this._getDefaultValue())[e]}},{key:"_getSettingPlaceholder",value:function(e){var t=this._getDefaultSettingValue(e);return""===t?"0px":t}},{key:"_getValues",value:function(){return this._values}},{key:"_getSettingValue",value:function(e){return this._getValues()[e]}},{key:"getInput",value:function(e){var t=P()({"top-left":this._onTopLeftChange,"top-right":this._onTopRightChange,"bottom-right":this._onBottomRightChange,"bottom-left":this._onBottomLeftChange},e),n=this._getDefaultSettingValue(e)===this.state.inputValues[e]?"":this.state.inputValues[e];return r.a.createElement("div",{className:"et-fb-settings-border-radius-"+e},r.a.createElement(D.a,{lassName:"et-fb-settings-option-input",value:n,onChange:t,defaultValue:this._getSettingPlaceholder(e),speed:.5,min:0,defaultUnit:"px",allowedUnits:this.props.allowed_units,readonly:this.props.readonly}))}},{key:"render",value:function(){var e={borderTopLeftRadius:this._getSettingValue("top-left"),borderTopRightRadius:this._getSettingValue("top-right"),borderBottomRightRadius:this._getSettingValue("bottom-right"),borderBottomLeftRadius:this._getSettingValue("bottom-left")},t=this._getSettingValue("border-link")?"#2b87da":"#bec9d6";return r.a.createElement("div",{className:"et-fb-settings-border-radius-wrap"},r.a.createElement("div",{className:"et-fb-settings-border-radius-wrap-column"},this.getInput("top-left"),this.getInput("bottom-left")),r.a.createElement("div",{className:"et-fb-settings-border-radius-wrap-column"},r.a.createElement("div",{className:"et-fb-settings-border-radius-preview",style:e,ref:"radiusPreview"},r.a.createElement(l.a,{handleWidth:!0,handleHeight:!0,onResize:this._onResize}),r.a.createElement("div",{className:"et-fb-settings-border-radius-wrap-link-button"},r.a.createElement(M.a,{buttonName:"ROUNDED_CORNERS_SYNC_VALUES",className:c()({"et-fb-settings-border-radius-wrap-link-button-active":this._getSettingValue("border-link")}),tooltip:this.props.tooltip,stopPropagation:!0,ink:!1,_onClick:this._onClickLink},r.a.createElement(T.a,{icon:"border-link",color:t}))))),r.a.createElement("div",{className:"et-fb-settings-border-radius-wrap-column"},this.getInput("top-right"),this.getInput("bottom-right")))}}]),n}();t.a=R}).call(this,n(31))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(1293),i=(o=r)&&o.__esModule?o:{default:o};t.default=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),s=c(a),l=c(n(5)),u=n(1294);function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={expandChildHeight:0,expandChildWidth:0,expandScrollLeft:0,expandScrollTop:0,shrinkScrollTop:0,shrinkScrollLeft:0,lastWidth:0,lastHeight:0},e.reset=e.reset.bind(e),e.handleScroll=e.handleScroll.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),i(t,[{key:"componentWillMount",value:function(){this.forceUpdate()}},{key:"componentDidMount",value:function(){var e=this.containerSize(),t=r(e,2),n=t[0],o=t[1];this.reset(n,o),this.props.onResize(n,o)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props!==e||this.state!==t}},{key:"componentDidUpdate",value:function(){this.expand.scrollLeft=this.expand.scrollWidth,this.expand.scrollTop=this.expand.scrollHeight,this.shrink.scrollLeft=this.shrink.scrollWidth,this.shrink.scrollTop=this.shrink.scrollHeight}},{key:"containerSize",value:function(){return[this.props.handleWidth&&this.container.parentElement.offsetWidth,this.props.handleHeight&&this.container.parentElement.offsetHeight]}},{key:"reset",value:function(e,t){if("undefined"!=typeof window){var n=this.container.parentElement,o="static";n.currentStyle?o=n.currentStyle.position:window.getComputedStyle&&(o=window.getComputedStyle(n).position),"static"===o&&(n.style.position="relative"),this.setState({expandChildHeight:this.expand.offsetHeight+10,expandChildWidth:this.expand.offsetWidth+10,lastWidth:e,lastHeight:t})}}},{key:"handleScroll",value:function(e){if("undefined"!=typeof window){e.preventDefault(),e.stopPropagation();var t=this.state,n=this.containerSize(),o=r(n,2),i=o[0],a=o[1];i===t.lastWidth&&a===t.lastHeight||this.props.onResize(i,a),this.reset(i,a)}}},{key:"render",value:function(){var e=this,t=this.state,n=o({},u.expandChildStyle,{width:t.expandChildWidth,height:t.expandChildHeight});return s.default.createElement("div",{style:u.parentStyle,ref:function(t){e.container=t}},s.default.createElement("div",{style:u.parentStyle,onScroll:this.handleScroll,ref:function(t){e.expand=t}},s.default.createElement("div",{style:n})),s.default.createElement("div",{style:u.parentStyle,onScroll:this.handleScroll,ref:function(t){e.shrink=t}},s.default.createElement("div",{style:u.shrinkChildStyle})))}}]),t}();t.default=d,d.propTypes={handleWidth:l.default.bool,handleHeight:l.default.bool,onResize:l.default.func},d.defaultProps={handleWidth:!1,handleHeight:!1,onResize:function(e){return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.parentStyle={position:"absolute",left:0,top:0,right:0,bottom:0,overflow:"hidden",zIndex:-1,visibility:"hidden"},t.shrinkChildStyle={position:"absolute",left:0,top:0,width:"200%",height:"200%"},t.expandChildStyle={position:"absolute",left:0,top:0,width:"100%",height:"100%"}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";(function(e){var o=n(1),r=n.n(o),i=n(21),a=n.n(i),s=n(34),l=n.n(s),u=n(18),c=n.n(u),d=n(2),p=n.n(d),f=n(7),h=n.n(f),g=n(60),m=n.n(g),v=n(9),b=n.n(v),y=n(13),_=n.n(y),k=(n(30),n(78)),w=n.n(k),C=n(52),E=n.n(C),S=n(95),O=n.n(S),T=n(298),M=n.n(T),x=n(0),D=n(1116),N=n(35),P=n(204),F=n(20),A=n(3),L=n(12),I=(n(1298),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}());function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){return x.default.hasValue(e)&&!b()(["none","0|none"],e)},B=function(e){return"add_new_account"===e},H=function(e){return"remove_account"===e},V=function(e){return"fetch_lists"===e},W=x.default.$topWindow("body"),G=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.force_clear_fields=!1,t.getProviderName=function(){return t.props.name.replace("_list","")},t.addNewAccountInProgress=function(){return B(t.props.value)},t.removeNewAccountInProgress=function(){return H(t.props.value)},t.fetchListsInProgress=function(){return V(t.props.value)},t.state={ajax_in_progress:!1,remove_account_ajax:!1},t.previous_selection="none",t.selected_account="",t.shouldComponentUpdate=l.a.shouldComponentUpdate.bind(t),t._addNewAccount=t._addNewAccount.bind(t),t._removeAccount=t._removeAccount.bind(t),t._ajaxSendRequest=t._ajaxSendRequest.bind(t),t._ajaxComplete=t._ajaxComplete.bind(t),t._fetchLists=t._fetchLists.bind(t),t.actionInProgress=t.actionInProgress.bind(t),t.cancelAllActions=t.cancelAllActions.bind(t),t.getProviderName=t.getProviderName.bind(t),t.getSelectedAccount=t.getSelectedAccount.bind(t),t._onChange=t._onChange.bind(t),t._onClickAddNewAccountButton=t._onClickAddNewAccountButton.bind(t),t._onClickFetchListsButton=t._onClickFetchListsButton.bind(t),t._onClickRemoveAccountButton=t._onClickRemoveAccountButton.bind(t),t._renderAddNewAccountButton=t._renderAddNewAccountButton.bind(t),t._renderRemoveAccountButton=t._renderRemoveAccountButton.bind(t),t._renderFetchListsButton=t._renderFetchListsButton.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r.a.Component),I(n,[{key:"componentWillMount",value:function(){A.a.addSignupModuleAddAccountCancelEventListener(this.cancelAllActions),A.a.addSignupModuleAddAccountSubmitEventListener(this._addNewAccount)}},{key:"componentWillUnmount",value:function(){A.a.removeSignupModuleAddAccountCancelEventListener(this.cancelAllActions),A.a.removeSignupModuleAddAccountSubmitEventListener(this._addNewAccount),W.removeClass("et-fb--email-action-in-progress et-fb--email-ajax-in-progress")}},{key:"componentWillReceiveProps",value:function(e){R(this.props.value)&&!R(e.value)&&this.setState({ajax_in_progress:!1,remove_account_ajax:!1})}},{key:"_addNewAccount",value:function(){var e=this,t=p()(this.props,"module.state.generalFields"),n=this.getProviderName(),o=w()(t,function(e,t){return E()(t,n)});if(!m()(o,function(e){return h()(e)})){var r=M()(o,function(t,n,o){O()(o,"_list")||(t["et_"+o]=p()(e.props.moduleAttrs,o,""))});r.action="et_builder_email_add_account",r.et_provider=n,r.et_builder_email_add_account_nonce=ETBuilderBackend.nonces.moduleEmailOptinAddAccount,this._ajaxSendRequest(r)}}},{key:"_removeAccount",value:function(){var e=this.getProviderName(),t=this.selected_account,n={action:"et_builder_email_remove_account",et_builder_email_remove_account_nonce:ETBuilderBackend.nonces.moduleEmailOptinRemoveAccount,et_provider:e,et_account:t};this._ajaxSendRequest(n,"remove_account_ajax")}},{key:"_ajaxSendRequest",value:function(t){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ajax_in_progress";this.setState(j({},o,!0)),e.ajax({type:"POST",url:ETBuilderBackend.ajaxUrl,dataType:"json",data:t}).done(function(e,t,o){n._ajaxComplete(e)}).fail(function(){return n._ajaxComplete()})}},{key:"_ajaxComplete",value:function(e){if(e){var t=this.props.module.props.module,n=F.a.getComponentFields(t.props.type)[this.props.name];n.options=_()({},e.accounts_list),L.b.updateComponentFieldDefinition(t.props.type,this.props.name,n),h()(e.predefined_custom_fields)||(ETBuilderBackend.emailPredefinedCustomFields=e.predefined_custom_fields),h()(e.custom_fields)||L.b.updateComponentFieldDefinitions(t.props.child_slug,e.custom_fields)}this.addNewAccountInProgress()&&this.state.ajax_in_progress&&A.a.emitSignupModuleAddAccountAjaxCompleteEvent(),this.force_clear_fields=this.removeNewAccountInProgress(),this.cancelAllActions()}},{key:"_fetchLists",value:function(){var e=this.getProviderName(),t=this.getSelectedAccount(),n={action:"et_builder_email_get_lists",et_builder_email_fetch_lists_nonce:ETBuilderBackend.nonces.moduleEmailOptinFetchLists,et_provider:e,et_account:t};this._ajaxSendRequest(n)}},{key:"actionInProgress",value:function(){return this.addNewAccountInProgress()||this.fetchListsInProgress()||this.removeNewAccountInProgress()}},{key:"cancelAllActions",value:function(){(""===this.previous_selection||b()(["add_new_account","fetch_lists","remove_account"],this.previous_selection))&&(this.previous_selection="none"),this.setState({ajax_in_progress:!1,remove_account_ajax:!1}),this.props._onChange(this.props.name,this.previous_selection)}},{key:"getSelectedAccount",value:function(){return e(a.a.findDOMNode(this)).find(":selected").parent().attr("label")}},{key:"setPreviousSelection",value:function(){this.previous_selection=this.getSelectedAccount()+"|"+this.props.value}},{key:"_onChange",value:function(e,t,n){var o=b()(["add_new_account","fetch_lists","remove_account"],t),r=this.actionInProgress()&&!o;this.props._onChange(e,t),r&&this.cancelAllActions(),!this.actionInProgress()&&o&&("add_new_account"===t?"aweber"===this.getProviderName()&&setTimeout(function(){x.default.topWindow().open("https://auth.aweber.com/1.0/oauth/authorize_app/b17f3351")},500):"fetch_lists"===t&&this._fetchLists())}},{key:"_onClickAddNewAccountButton",value:function(){this.addNewAccountInProgress()||(this.setPreviousSelection(),this._onChange(this.props.name,"add_new_account"))}},{key:"_onClickFetchListsButton",value:function(){this.removeNewAccountInProgress()?this.cancelAllActions():this.actionInProgress()||(this.setPreviousSelection(),this._onChange(this.props.name,"fetch_lists"))}},{key:"_onClickRemoveAccountButton",value:function(){this.removeNewAccountInProgress()&&!this.state.remove_account_ajax?this._removeAccount():this.removeNewAccountInProgress()||(this.selected_account=this.getSelectedAccount(),this.setPreviousSelection(),this._onChange(this.props.name,"remove_account"))}},{key:"componentWillUpdate",value:function(e,t){var n=t.ajax_in_progress;B(e.value)||V(e.value)?W.addClass("et-fb--email-action-in-progress"):W.removeClass("et-fb--email-action-in-progress"),n?W.addClass("et-fb--email-ajax-in-progress"):W.removeClass("et-fb--email-ajax-in-progress")}},{key:"_renderAddNewAccountButton",value:function(e){var t=p()(this.props,"after[0].text","");return this.addNewAccountInProgress()||this.removeNewAccountInProgress()?"":r.a.createElement(P.a,{useWrapper:!1,isLoading:this.state.ajax_in_progress},r.a.createElement(N.a,{className:e,_onClick:this._onClickAddNewAccountButton,inverse:!0},t))}},{key:"_renderRemoveAccountButton",value:function(e){var t=this.removeNewAccountInProgress(),n=p()(this.props,"after[1].attributes.data-confirm_text",""),o=p()(this.props,"after[1].text","");return this.addNewAccountInProgress()||this.fetchListsInProgress()||!R(this.props.value)?"":r.a.createElement(P.a,{useWrapper:!1,isLoading:this.state.remove_account_ajax},r.a.createElement(N.a,{className:e,_onClick:this._onClickRemoveAccountButton,inverse:!0},t?n:o))}},{key:"_renderFetchListsButton",value:function(e){var t=this.addNewAccountInProgress(),n=p()(this.props,"after[2].attributes['data-cancel_text']",""),o=p()(this.props,"after[2].text","");return t||this.state.ajax_in_progress||this.state.remove_account_ajax||!R(this.props.value)?"":r.a.createElement(P.a,{useWrapper:!1,isLoading:this.fetchListsInProgress()},r.a.createElement(N.a,{className:e,_onClick:this._onClickFetchListsButton,inverse:!0},this.removeNewAccountInProgress()?n:o))}},{key:"render",value:function(){var e,t=this.props.type.replace(/_/g,"-"),n=c()({"et-fb-settings-button--additional-button":!0}),o=this.addNewAccountInProgress()&&this.state.ajax_in_progress,i=this.addNewAccountInProgress()||this.removeNewAccountInProgress(),a="";i&&this.addNewAccountInProgress()?a=this.props.attributes["data-adding_new_account_text"]:i&&this.removeNewAccountInProgress()&&(a=this.props.attributes["data-confirm_remove_text"]+" "+this.selected_account);var s=c()((j(e={},"et-fb-option--"+t,!0),j(e,"et-fb--email-add-new-in-progress-ajax",o),j(e,"et-fb--email-add-new-in-progress",this.addNewAccountInProgress()),j(e,"et-fb--email-fetch-lists-in-progress",this.fetchListsInProgress()),j(e,"et-fb--email-remove-in-progress",this.removeNewAccountInProgress()),e)),l=this.props.value||this.props.default,u=!this.props.readonly,d=R(l),p=u&&!this.props.hideAddButton,f=d&&u&&!this.props.hideRemoveButton,h=d&&u&&!this.props.hideFetchButton;return r.a.createElement("div",{className:s},i?r.a.createElement("span",{className:"et-fb-form__description"},a):r.a.createElement(D.a,{name:this.props.name,value:this.props.value||this.props.default,className:c()("et-fb-settings-option--with-after-element"),groups:!0,options:this.props.options,module:this.props.module,readonly:this.props.readonly||!1,_onChange:this._onChange}),p&&this._renderAddNewAccountButton(n),f&&this._renderRemoveAccountButton(n),h&&this._renderFetchListsButton(n))}}]),n}();t.a=G}).call(this,n(31))},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";(function(e,o){var r=n(1),i=n.n(r),a=n(5),s=n.n(a),l=n(7),u=n.n(l),c=n(4),d=n.n(c),p=n(2),f=n.n(p),h=n(314),g=n.n(h),m=(n(1303),n(718)),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var b=function(t){function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r["PureComponent"]),v(n,[{key:"_openLinkInNewTab",value:function(t){var n=t.target.href;d()(n)||(t.preventDefault(),e.topWindow().open(n,"_blank").focus())}},{key:"componentDidMount",value:function(){this.$creditsContainer=o(this.creditsContainer),this.$creditsContainer.on("click","a",this._openLinkInNewTab)}},{key:"componentWillUnmount",value:function(){this.$creditsContainer.off("click","a",this._openLinkInNewTab)}},{key:"render",value:function(){var e=this,t=this.props,n=t.moduleTitle,o=t.moduleType,r=f()(ETBuilderBackend,"customModuleCredits."+o,!1),a=f()(ETBuilderBackend,"customModuleCredits."+o+".author","");if(!r||u()(a))return!1;var s=u()(r.module_uri)?n:'<a href="'+r.module_uri+'">'+n+"</a>",l=u()(r.author_uri)?a:'<a href="'+r.author_uri+'">'+a+"</a>";return i.a.createElement("div",{className:"et-fb-settings-modal-module-credits",dangerouslySetInnerHTML:{__html:g()(s+" by "+l)},ref:function(t){return e.creditsContainer=t}})}}]),n}(),y={moduleTitle:s.a.string,moduleType:s.a.string};m.a.propTypes=y,t.a=b}).call(this,n(0),n(31))},function(e,t,n){},function(e,t,n){"use strict";(function(e){var o=n(1),r=n.n(o),i=n(21),a=n.n(i),s=n(82),l=n.n(s),u=n(18),c=n.n(u),d=n(7),p=n.n(d),f=n(42),h=n.n(f),g=n(161),m=n.n(g),v=n(2),b=n.n(v),y=n(262),_=n.n(y),k=n(0),w=n(233),C=n(3),E=n(12),S=n(152),O=(n(1305),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}());var T=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={activeColorpicker:null,paletteColors:p()(t.getSavedPalette())?t.getDefaultPalette():t.getSavedPalette()},t._repositionColorpickerElements=t._repositionColorpickerElements.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r.a.Component),O(n,[{key:"getClassName",value:function(e){return"et-fb-settings-option-colorpalette-"+e}},{key:"getDefaultPalette",value:function(){return ETBuilderBackend.pageSettingsFields.et_pb_color_palette.default.split("|")}},{key:"getSavedPalette",value:function(){return k.default.get(C.a.getPageSetting("et_pb_color_palette"),"").split("|").filter(_()(p.a))}},{key:"getPalette",value:function(){return this.state.paletteColors}},{key:"_repositionColorpickerElements",value:function(){var t=e(a.a.findDOMNode(this)).find('.et-fb-settings-option-colorpalette-colorpicker-wrap[data-index="'+this.state.activeColorpicker+'"]'),n=parseInt(t.find(".iris-square-value.ui-draggable").width()),o=parseInt(t.find(".iris-square-value.ui-draggable").css("left"))+n/2,r=parseInt(t.width());k.default.hasValue(this.props.value)&&o>r-50?t.addClass("on-right-corner"):t.removeClass("on-right-corner")}},{key:"render",value:function(){var e=this,t=this.getPalette(),n=m()(8).map(function(n){return r.a.createElement("span",{key:"overviewItem-"+n,className:e.getClassName("overview-item"),"data-index":n,"data-tip":!0,"data-for":"color-palette-tooltip-"+n,onClick:e._onOverviewClick.bind(e,n)},r.a.createElement("span",{className:"color",style:{backgroundColor:t[n]}}),r.a.createElement(l.a,{id:"color-palette-tooltip-"+n,effect:"solid"},t[n]))}),o=m()(8).map(function(n){var o={};o[""+e.getClassName("colorpicker-wrap")]=!0,o[e.getClassName("colorpicker-wrap")+"--active"]=n===e.state.activeColorpicker;var i={"et-fb-settings-option-colorpalette-input":!0};return i["et-fb-color-type-"+S.a.getColorType(t[n])]=!0,r.a.createElement("div",{className:c()(o),key:"colorpickerWrap-"+n,"data-index":n},r.a.createElement(w.a,{ref:"input-"+n,className:c()(i),name:e.getClassName("input")+"-"+n,value:t[n],_onChange:e._onChange,additional_attrs:{"data-alpha":!0}}))});return r.a.createElement("div",{className:c()({"et-fb-settings-option-inner":!0,"et-fb-settings-option-inner--colorpalette":!0}),ref:"colorpalette"},r.a.createElement("div",{className:e.getClassName("overview")},n),o)}},{key:"componentWillReceiveProps",value:function(){var e=this.getSavedPalette();h()(this.getPalette(),e)||this.setState({paletteColors:p()(e)?this.getDefaultPalette():e})}},{key:"componentDidMount",value:function(){var e=this,t=this.getPalette(),n=this.getDefaultPalette(),o=k.default.$appWindow(a.a.findDOMNode(this.refs.colorpalette)),r=void 0;o.find("."+e.getClassName("input")).each(function(o,i){var a=k.default.$appWindow(this);a.wpColorPicker({hide:!1,default:n[o],palettes:!1,change:function(n,i){var a=i.color.toString();if(t[o]=a,e.setState({paletteColors:t}),E.b.pageSettingsChange("et_pb_color_palette",t.join("|")),"square"===b()(n,"originalEvent.type")){var s=k.default.$appWindow(this).closest(".et-fb-settings-option-colorpalette-colorpicker-wrap");s.find(".button-confirm").css("backgroundColor",a),s.hasClass("is-dragging")||s.addClass("is-dragging"),clearTimeout(r),r=setTimeout(function(){e._repositionColorpickerElements(),s.find(".button-confirm").css("backgroundColor",""),s.removeClass("is-dragging")},300)}},clear:function(){var n=e.getDefaultPalette();t[o]=n[o],a.wpColorPicker("color",n[o]),E.b.pageSettingsChange("et_pb_color_palette",t.join("|"))},diviColorpicker:!0,onClose:function(){k.default.$topDocument().off("click.etClickOutsideColorpicker_"+o),e.setState({activeColorpicker:null})}}),a.next('input[type="button"]').attr({value:ETBuilderBackend.i18n.controls.colorpicker.clear}),a.closest(".wp-picker-container").find(".wp-color-result").attr("title",ETBuilderBackend.i18n.controls.colorpicker.select)})}},{key:"_onOverviewClick",value:function(e){var t=this,n=e===this.state.activeColorpicker?null:e,o=k.default.$appWindow(a.a.findDOMNode(this)).find('.et-fb-settings-option-colorpalette-colorpicker-wrap[data-index="'+n+'"]'),r=o.find("."+this.getClassName("input"));o.find(".iris-picker").show(),k.default.$topDocument().on("click.etClickOutsideColorpicker.etClickOutsideColorpicker_"+e,function(){r.wpColorPicker("close")}),this.setState({activeColorpicker:n}),setTimeout(function(){t._repositionColorpickerElements()},100)}},{key:"_onChange",value:function(){}}]),n}();t.a=T}).call(this,n(31))},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";(function(e){var o=n(1),r=n.n(o),i=n(17),a=n(18),s=n.n(a),l=n(5),u=n.n(l),c=n(7),d=n.n(c),p=(n(1312),n(12)),f=(n(3),n(35)),h=n(32),g=n(808),m=n(100),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var b=ETBuilderBackend.i18n,y={className:u.a.string,currentVideo:u.a.number,currentVideoList:u.a.string,modalPosition:u.a.object,modalWidth:u.a.number,modalMoving:u.a.bool},_=function(t){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.state={videoHover:!1},e._handleVideoMouseEnter=e._handleVideoMouseEnter.bind(e),e._handleVideoMouseLeave=e._handleVideoMouseLeave.bind(e),e._renderUndockButton=e._renderUndockButton.bind(e),e._handleAnimation=e._handleAnimation.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o["Component"]),v(n,[{key:"_handleVideoMouseEnter",value:function(){this.props.modalMoving||this.setState({videoHover:!0})}},{key:"_handleVideoMouseLeave",value:function(){this.setState({videoHover:!1})}},{key:"_handleAnimation",value:function(e,t){return this.props.animate?e:t}},{key:"_renderUndockButton",value:function(){var e=this.props,t=e.helpModalState,n=e.modalPosition,o=e.modalWidth,a=e.videoOverlayStatus,s=this.state.videoHover,l=d()(t)?{width:o,position:{x:n.x,y:n.y}}:t;return r.a.createElement(i.Motion,{defaultStyle:{s:.5,o:0,x:15,y:15},style:{s:this._handleAnimation(Object(i.spring)(s?1:.5,{stiffness:300,damping:20}),s?1:.5),o:this._handleAnimation(Object(i.spring)(s?1:0,{stiffness:300,damping:20}),s?1:0),x:this._handleAnimation(Object(i.spring)(s?15:0,{stiffness:300,damping:20}),s?15:0),y:this._handleAnimation(Object(i.spring)(s?0:15,{stiffness:300,damping:20}),s?0:15)}},function(e){return r.a.createElement(f.a,{round:!0,elevate:!0,primary:!0,small:!0,__onClick:function(){p.b.setVideoOverlay(l.width,l.position.x,l.position.y,!a)},style:{opacity:e.o,transform:"translate("+e.x+"px, "+e.y+"px) scale("+e.s+")"}},r.a.createElement(h.a,{icon:"window-undock",color:"#FFFFFF"}))})}},{key:"render",value:function(){var t=this.props,n=t.className,o=t.currentVideo,i=t.currentVideoList,a=t.modalWidth,l=t.videoOverlayStatus,u=s()("et-fb-video-list",n);return r.a.createElement("div",{className:u},r.a.createElement("div",{className:"et-fb-video-list__container"},r.a.createElement("div",{className:"et-fb-video-list__header",onMouseEnter:this._handleVideoMouseEnter,onMouseLeave:this._handleVideoMouseLeave,style:{height:.5625*(a-60)}},r.a.createElement(m.a,null,this._renderUndockButton(),l?r.a.createElement("span",null,b.video.active):function(e,t){return navigator.onLine?r.a.createElement(g.a,{dividers:!0,style:{width:"100%",height:"100%"},videoId:b.videos[e][t].id}):r.a.createElement("span",null,b.video.offline)}(i,o))),r.a.createElement("ul",{className:"et-fb-video-list__menu"},r.a.createElement(m.a,null,Object.keys(b.videos[i]).map(function(t){return r.a.createElement("li",{className:s()({"et-fb-video-list__item":!0,"et-fb-video-list__item--active":o===parseInt(t,10)}),onClick:function(n){e(n.target).closest(".et-fb-tabs__panel--active").animate({scrollTop:0},300),p.b.setVideo(parseInt(t,10))},key:"video-"+t},r.a.createElement("div",{className:"et-fb-video-list__icon"}),r.a.createElement("span",null,b.videos[i][t].name))})))))}}]),n}();_.propTypes=y,_.defaultProps={currentVideo:1,currentVideoList:"et_pb_default"},t.a=_}).call(this,n(31))},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";(function(e){var o=n(1),r=n.n(o),i=n(1316),a=n.n(i),s=n(31),l=n.n(s),u=n(18),c=n.n(u),d=n(2),p=n.n(d),f=n(10),h=n.n(f),g=n(42),m=n.n(g),v=n(7),b=n.n(v),y=n(40),_=n.n(y),k=n(47),w=n.n(k),C=n(44),E=n.n(C),S=n(4),O=n.n(S),T=n(19),M=n.n(T),x=n(1169),D=n(0),N=n(204),P=n(1318),F=n(1320),A=n(12),L=n(885),I=n(3),j=n(20),R=(n(1321),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}());var B=Object(x.a)("div"),H=function(t){function n(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));o.state={local_layouts:{},custom_layouts:{},account_status_error:"",account_auth_failed:!1,et_username:"",et_api_key:"",username_field_help_active:!1,api_key_field_help_active:!1,hovered_field_group:null,ajax_in_progress:!1},o.tabs=[{name:["library","Premade Layouts"],className:"modules_all"},{name:["library","Your Saved Layouts"],className:"modules_library"}],o._hasActiveAccount=function(){return"active"===o.account.status},o.onAccountStatusError=function(e){o.setState({account_status_error:e}),o.props.pageChanged(!0)},o.onAuthenticationComplete=function(e){if(o.state.account_status_error){if(o.setState({ajax_in_progress:!1}),e.authenticated)return o.account={et_username:o.state.et_username,et_api_key:o.state.et_api_key,status:e.status},o.setState({account_status_error:""}),o.library.call("retryUseLayout"),void A.b.updateETAccount(o.account);o.setState({account_auth_failed:!0})}},o.onChangeAccountFields=function(e,t){t!==o.state[e]&&o.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t))},o.onClickAccountSubmit=function(){var e={et_username:o.state.et_username,et_api_key:o.state.et_api_key};o.setState({ajax_in_progress:!0}),o.library.call("authenticate",e)},o.onClickHelpButton=function(){A.b.setVideoList("et_pb_default_layouts",1,"library")},o.onDismissedAccountStatusError=function(){return o.setState({account_status_error:""})},o.onDownloadProgress=function(e){(e=Math.floor(e/2))<1&&(e=1),o.props._onChange("importProgress",e)},o.onLayoutsDataFetched=function(e,t){o.setState({local_layouts:e,custom_layouts:t})},o.onPageChanged=function(e){var t=o.current_page.previous_url;o.current_page=e,o.current_page.previous_url||(o.current_page.previous_url=t),o.props.pageChanged(e.is_layout)},o.onUseLayout=function(e){if(I.a.isProductTourActive()&&l()("body").trigger("et_fb_product_tour_element_clicked"),E()(e))var t=e.layout,n=e.replace_content;else t=e;w()(t)?(t=new F.a([t],"layout.json",{type:"application/json"}),o.props._onChange({importFile:t,importOptions:{replaceLayout:n}}),setTimeout(o.props.importLayout,150)):(n="on"===n,L.a.getLayout(t).then(function(e){A.b.insertSavedModule(e,!0,n)}))},o.account=I.a.getETAccount(),o.site_url=ETBuilderBackend.site_url,o.library=null,o.$library=l()(),o.library_url=o._getLibraryURL(),o.inside_iframe=!1,o.current_page={},L.a.addLayoutsDataFetchedListener(o.onLayoutsDataFetched),e.appWindow().onAccountStatusError=o.onAccountStatusError;var r=j.a.getLayoutsTabs();return E()(r)&&!b()(r)&&h()(r,function(e,t){return o.tabs.push({name:e,className:t})}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r.a.Component),R(n,[{key:"_getLibraryURL",value:function(){var e=[],t={animation:I.a.getAppPreference("builder_animation"),iframe:1};return this.props.isProductTour&&(t.product_tour=1),h()(t,function(t,n){return e.push("et_"+n+"="+t)}),"https://www.elegantthemes.com/layouts?"+(e=e.join("&"))}},{key:"_loadLibrary",value:function(){return a.a.debug=!1,new a.a({container:this.node,url:this._getLibraryURL()})}},{key:"_setLayoutsData",value:function(){if(b()(L.a.layouts_data))A.b.fetchLayoutsData();else{var e=L.a.layouts_data.local_layouts,t=L.a.layouts_data.custom_layouts;this.setState({local_layouts:e,custom_layouts:t})}}},{key:"componentWillMount",value:function(){this._setLayoutsData()}},{key:"componentDidMount",value:function(){var t=this;this.mounted=!0,Object(D.enableScrollLock)(),e.$appWindow().on("et-fb-product-tour-skip",function(e,n){t.library.call("productTourSkipStep",n)}),this._loadLibrary().then(function(e){if(t.mounted&&(t.library=e,t.$library=l()(e.frame),t.$library.height(t.props.height-96).width(t.props.width),Object(D.isIEOrEdge)()&&(t.$library.onload=function(){t.$library.contentWindow.location.reload(),t.$library.onload=null}),t.library.on("current_page_changed",t.onPageChanged),t.library.on("use_layout",t.onUseLayout),t.library.on("download_progress",t.onDownloadProgress),t.library.on("account_status_error",t.onAccountStatusError),t.library.on("authentication_complete",t.onAuthenticationComplete),t.library.on("help_button_clicked",t.onClickHelpButton),t.library.call("setAccount",{username:Object(D.sanitized_previously)(t.account.et_username),api_key:Object(D.sanitized_previously)(t.account.et_api_key)}),t.library.call("setShowLoadOptions",!t.isCurrentLayoutEmpty()),t.props.doneLoading(),t._setLayoutsData(),!O()(t.props.layoutFilters))){var n=M()(t.props.layoutFilters)?t.props.layoutFilters:[t.props.layoutFilters];t.library.call("emitSignal",{signal:"categoriesFilterChanged",data:{value:n}})}})}},{key:"componentWillReceiveProps",value:function(e){e.backToLayouts&&this.state.account_status_error&&(e.active_tab!==this.props.active_tab&&this.$library.hide(0),this.setState({account_status_error:""}),this.props.pageChanged(!0))}},{key:"componentDidUpdate",value:function(e){this.props.width!==e.width&&this.$library.width(this.props.width),this.props.height!==e.height&&this.$library.height(this.props.height-96)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.library&&this.library.destroy(),L.a.removeLayoutsDataFetchedListener(this.onLayoutsDataFetched),Object(D.disableScrollLock)()}},{key:"isCurrentLayoutEmpty",value:function(){return 0===l()("#et_pb_root").find(".et_pb_module, .et-fb-skeleton--collapsed").length||I.a.isProductTourActive()}},{key:"shouldComponentUpdate",value:function(e,t){var n=e.active_tab!==this.props.active_tab,o=e.active_tab===this.props.active_tab&&"modules_all"===e.active_tab;if(this.library&&e.backToLayouts&&!this.state.account_status_error&&!n)this.library.call("goTo",this.current_page.previous_url);else if(this.library&&(n||!o)){var r="modules_all"===e.active_tab?{}:this.state.local_layouts;"modules_library"!==e.active_tab&&(r=p()(this.state.custom_layouts,e.active_tab,{})),_()(r,"filters.type",this.props.type),_()(r,"load_options.show",!this.isCurrentLayoutEmpty()),this.library.call("toggleLocalLayouts",r),n&&this.state.account_status_error&&this.$library.fadeIn()}return!m()(this.props,e)||!m()(this.state,t)}},{key:"_renderAccountStatusError",value:function(){return r.a.createElement(P.a,{status:this.state.account_status_error,authFailed:this.state.account_auth_failed,onClickSubmitButton:this.onClickAccountSubmit,onChangeAccountFields:this.onChangeAccountFields,ajaxInProgress:this.state.ajax_in_progress})}},{key:"render",value:function(){var e,t=this,n=c()({"et-fb-library-container":!0,"et-fb-portability__content--hidden":this.props.isLoadingLayout||this.state.account_status_error}),o=c()({"et-fb-main-settings":!0,"et-fb-main-settings--load_layout":!0,"et-fb-main-settings--error":this.state.account_status_error,"et-fb-main-settings--moving":this.props.modalMoving});return r.a.createElement("div",{className:o},(e=this.props)._renderTabs.apply(e,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.tabs)),this.props.isLoadingLayout&&this.props._renderProgressBar(),this.state.account_status_error&&this._renderAccountStatusError(),r.a.createElement(N.a,{isLoading:this.props.isLoading}),r.a.createElement("div",{className:n},r.a.createElement(B,{_ref:function(e){return t.node=e}})))}}]),n}();H.displayName="ETBuilderLibraryModal",t.a=Object(x.b)(H,"download")}).call(this,n(0))},function(e,t,n){
/**
  * postmate - A powerful, simple, promise-based postMessage library
  * @version 1.1.9
  * @link https://github.com/dollarshaveclub/postmate
  * @author Jacob Kelley <jakie8@gmail.com>
  * @license MIT */
e.exports=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(){var e;d.debug&&(e=console).log.apply(e,arguments)}var n=window.navigator.userAgent.indexOf("Edge")>-1;function o(e,t){return(e.origin===t||n)&&"object"===i(e.data)&&"postmate"in e.data&&e.data.type===a&&!!{"handshake-reply":1,call:1,emit:1,reply:1,request:1}[e.data.postmate]}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a="application/x-postmate-v1+json",s=Object.prototype.hasOwnProperty,l=0,u=function(){function n(o){var r=this;e(this,n),this.parent=o.parent,this.frame=o.frame,this.child=o.child,this.childOrigin=o.childOrigin,this.events={},t("Parent: Registering API"),t("Parent: Awaiting messages..."),this.listener=function(e){var n=((e||{}).data||{}).value||{},o=n.data,i=n.name;"emit"===e.data.postmate&&(t("Parent: Received event emission: "+i),i in r.events&&r.events[i].call(r,o))},this.parent.addEventListener("message",this.listener,!1),t("Parent: Awaiting event emissions from Child")}return r(n,[{key:"get",value:function(e){var t=this;return new d.Promise(function(n){var o=++l;t.parent.addEventListener("message",function e(r){r.data.uid===o&&"reply"===r.data.postmate&&(t.parent.removeEventListener("message",e,!1),n(r.data.value))},!1),t.child.postMessage({postmate:"request",type:a,property:e,uid:o},t.childOrigin)})}},{key:"call",value:function(e,t){this.child.postMessage({postmate:"call",type:a,property:e,data:t},this.childOrigin)}},{key:"on",value:function(e,t){this.events[e]=t}},{key:"destroy",value:function(){t("Parent: Destroying Postmate instance"),window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}]),n}(),c=function(){function n(r){var i=this;e(this,n),this.model=r.model,this.parent=r.parent,this.parentOrigin=r.parentOrigin,this.child=r.child,t("Child: Registering API"),t("Child: Awaiting messages..."),this.child.addEventListener("message",function(e){if(o(e,i.parentOrigin)){t("Child: Received request",e.data);var n=e.data,r=n.property,s=n.uid,l=n.data;if("call"===e.data.postmate)return void(r in i.model&&"function"==typeof i.model[r]&&i.model[r].call(i,l));(function(e,t){var n="function"==typeof e[t]?e[t]():e[t];return d.Promise.resolve(n)})(i.model,r).then(function(t){return e.source.postMessage({property:r,postmate:"reply",type:a,uid:s,value:t},e.origin)})}})}return r(n,[{key:"emit",value:function(e,n){t('Child: Emitting Event "'+e+'"',n),this.parent.postMessage({postmate:"emit",type:a,value:{name:e,data:n}},this.parentOrigin)}}]),n}(),d=function(){function n(t){e(this,n);var o=t.container,r=void 0===o?void 0!==r?r:document.body:o,i=t.model,a=t.url;return this.parent=window,this.frame=document.createElement("iframe"),r.appendChild(this.frame),this.child=this.frame.contentWindow||this.frame.contentDocument.parentWindow,this.model=i||{},this.sendHandshake(a)}return r(n,[{key:"sendHandshake",value:function(e){var r=this,i=function(e){var t=document.createElement("a");return t.href=e,t.origin||t.protocol+"//"+t.hostname}(e),s=0,l=void 0;return new n.Promise(function(n,c){r.parent.addEventListener("message",function e(a){return!!o(a,i)&&("handshake-reply"===a.data.postmate?(clearInterval(l),t("Parent: Received handshake reply from Child"),r.parent.removeEventListener("message",e,!1),r.childOrigin=a.origin,t("Parent: Saving Child origin",r.childOrigin),n(new u(r))):(t("Parent: Invalid handshake reply"),c("Failed handshake")))},!1);var d=function(){t("Parent: Sending handshake attempt "+ ++s,{childOrigin:i}),r.child.postMessage({postmate:"handshake",type:a,model:r.model},i),5===s&&clearInterval(l)},p=function(){d(),l=setInterval(d,500)};r.frame.attachEvent?r.frame.attachEvent("onload",p):r.frame.onload=p,t("Parent: Loading frame",{url:e}),r.frame.src=e})}}]),n}();return d.debug=!1,d.Promise=function(){try{return window?window.Promise:Promise}catch(e){return null}}(),d.Model=function(){function o(t){return e(this,o),this.child=window,this.model=t,this.parent=this.child.parent,this.sendHandshakeReply()}return r(o,[{key:"sendHandshakeReply",value:function(){var e=this;return new d.Promise(function(o,r){e.child.addEventListener("message",function i(l){if(l.data.postmate){if("handshake"===l.data.postmate){t("Child: Received handshake from Parent"),e.child.removeEventListener("message",i,!1),t("Child: Sending handshake reply to Parent"),l.source.postMessage({postmate:"handshake-reply",type:a},l.origin),e.parent!==l.source&&(e.parent=l.source),e.parentOrigin=n?"*":l.origin;var u=l.data.model;if(u){for(var d=Object.keys(u),p=0;p<d.length;p++)s.call(u,d[p])&&(e.model[d[p]]=u[d[p]]);t("Child: Inherited and extended model from Parent")}return t("Child: Saving Parent origin",e.parentOrigin),o(new c(e))}return r("Handshake Reply Failed")}},!1)})}}]),o}(),d}()},function(e,t,n){},function(e,t,n){"use strict";var o=n(1),r=n.n(o),i=n(18),a=n.n(i),s=n(32),l=n(35),u=n(233),c=n(273),d=(n(1319),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}());function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=ETBuilderBackend.i18n,h=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.state={username_field_help_active:!1,api_key_field_help_active:!1,hovered_field_group:null},o.onClickAccountFieldHelp=function(e){var t=e+"_field_help_active";o.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,!o.state[t]))},o.onMouseEnterFieldGroup=function(e){o.setState({hovered_field_group:e})},o.onMouseLeaveFieldGroup=function(e){o.state.hovered_field_group===e&&o.setState({hovered_field_group:null})},p(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),d(t,[{key:"_renderSubmitButton",value:function(){var e=r.a.createElement(s.a,{icon:"loading",color:"#FFFFFF"});return r.a.createElement(l.a,{_onClick:this.props.onClickSubmitButton,inverse:!0},this.state.ajax_in_progress||f.library.Submit,this.state.ajax_in_progress&&e)}},{key:"_renderAPIKeyFormGroup",value:function(){return r.a.createElement(c.b,{name:"api_key",onMouseEnterGroup:this.onMouseEnterFieldGroup,onMouseLeaveGroup:this.onMouseLeaveFieldGroup},r.a.createElement(c.c,{name:"api_key",activeHelp:this.state.api_key_field_help_active,hoveredGroup:"api_key"===this.state.hovered_field_group,onClickHelp:this.onClickAccountFieldHelp},f.library["API Key"]),r.a.createElement(c.a,{active:this.state.api_key_field_help_active},f.library.$apiKeyHelp),r.a.createElement(u.a,{type:"text",value:this.props.et_api_key,name:"et_api_key",_onChange:this.props.onChangeAccountFields}))}},{key:"_renderUsernameFormGroup",value:function(){return r.a.createElement(c.b,{name:"username",onMouseEnterGroup:this.onMouseEnterFieldGroup,onMouseLeaveGroup:this.onMouseLeaveFieldGroup},r.a.createElement(c.c,{name:"username",activeHelp:this.state.username_field_help_active,hoveredGroup:"username"===this.state.hovered_field_group,onClickHelp:this.onClickAccountFieldHelp},f.library.Username),r.a.createElement(c.a,{active:this.state.username_field_help_active},f.library.$usernameHelp),r.a.createElement(u.a,{type:"text",value:this.props.et_username,name:"et_username",_onChange:this.props.onChangeAccountFields}))}},{key:"_renderExpiredAccountError",value:function(){return r.a.createElement("div",{className:"et-fb-account-status-error__content"},r.a.createElement("p",{dangerouslySetInnerHTML:{__html:f.library.$expiredAccount}}))}},{key:"_renderNoAccountError",value:function(){return r.a.createElement("div",{className:"et-fb-account-status-error__content"},r.a.createElement("p",null,f.library.$noAccount),this._renderUsernameFormGroup(),this._renderAPIKeyFormGroup(),r.a.createElement("div",null,this._renderSubmitButton()))}},{key:"render",value:function(){var e="expired"===this.props.status,t=e?f.library["Uh Oh!"]:f.library["Authentication Required"],n={"et-fb-account-status-error":!0,"et-fb-account-status-error--auth-failed":this.props.authFailed};return r.a.createElement("div",{className:a()(n)},r.a.createElement("h2",null,t),e&&this._renderExpiredAccountError(),e||this._renderNoAccountError())}}]),t}();t.a=h},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome");function r(e,t,n){if(!document.documentMode&&!window.StyleMedia&&!o)return new window.File(e,t,n);var r=new Blob(e,n);return r.lastModified=Date.now(),r.name=t,r}},function(e,t,n){},function(e,t,n){"use strict";var o=n(1),r=n.n(o),i=n(18),a=n.n(i),s=n(4),l=n.n(s),u=n(2),c=n.n(u),d=n(37),p=n.n(d),f=n(7),h=n.n(f),g=n(107),m=n.n(g),v=n(87),b=n(204),y=n(1165),_=n(233),k=n(474),w=n(1117),C=n(0),E=n(1169),S=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var T=ETBuilderBackend.i18n.tooltips,M=ETBuilderBackend.saveModuleLibraryCategories,x=new v.AllHtmlEntities,D=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._getFilePlaceholderClassName=function(){return a()({"et-core-portability-import-placeholder":!0,"et-fb-portability-import-placeholder--active":!h()(c()(n.props,"importFile.name",""))})},n._onChange=function(e,t){var o=void 0;switch(e){case"importOptions":var r=t.split("|"),i=S(r,3);o={importOptions:{addToLibrary:"off",replaceLayout:i[0],importBackUp:i[1],includeCustomDefaults:i[2]}}}n.props._onChange(o)},n.onImportLayout=function(e){e.preventDefault(),n.props.importLayout()},n.onExportLayout=function(e){e.preventDefault(),n.props.exportLayout()},n.onFileUpload=function(e){var t=c()(e,"target.files[0]",""),o=t?t.name.replace(".json",""):"";n.props._onChange({importFile:t,importLayoutName:o})},n._renderCategories=function(){return!(!M||0===M.length)&&r.a.createElement(o.Fragment,null,r.a.createElement("div",{className:"et-fb-import-categories-field"},r.a.createElement("h3",null,ETBuilderBackend.i18n.saveModuleLibraryAttrs.addToCatText,":"),r.a.createElement("div",{className:"et-fb-settings-option-container"},r.a.createElement(w.a,{value:n.props.importCategories,name:"importCategories",options:p()(M,function(e){return e.name}),shortcut_index:"import-categories",_onChange:n.props._onChange}))),r.a.createElement("div",{className:"et-fb-export-file-name-field"},r.a.createElement("h3",null,ETBuilderBackend.i18n.saveModuleLibraryAttrs.createCatText),r.a.createElement(_.a,{type:"text",value:n.props.importNewCategory,name:"importNewCategory",_onChange:n.props._onChange})))},n._renderExportTab=function(){return r.a.createElement("div",{className:n.props.tabClassName("modules_all")},r.a.createElement("div",{className:"et-fb-export-file-name-field"},r.a.createElement("h3",null,T.exportName),r.a.createElement(_.a,{type:"text",value:n.props.exportFileName,name:"exportFileName",_onChange:n.props._onChange})),r.a.createElement("div",{className:"et-fb-export-error-container"},n.props.exportError),r.a.createElement(k.a,{videoListId:"et_pb_portability",trigger:"tooltip"}),r.a.createElement("a",{href:"#",className:"et-fb-save-library-button",onClick:n.onExportLayout},T.exportButton))},n._renderImportTab=function(){var e=n.props.importOptions,t=e.addToLibrary,o=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["addToLibrary"]),i=p()(o,function(e,t){return{value:T.portabilityTabs.import[t],label:x.decode(T.portabilityTabs.import[t]),className:t}}),a=m()(o).join("|");return r.a.createElement("div",{className:n.props.tabClassName("modules_library")},r.a.createElement("div",{className:"et-fb-upload-file-container"},r.a.createElement("h3",null,T.chooseFile),r.a.createElement("span",{className:n._getFilePlaceholderClassName()},n.props.importFileName()),r.a.createElement("input",{type:"file",className:"et-fb-import-file",onChange:n.onFileUpload})),r.a.createElement("div",{className:"et-fb-import-error-container"},n.props.importError),r.a.createElement("div",{className:"et-fb-portability-options-field"},r.a.createElement("h3",null,T.portabilityOptions),r.a.createElement(w.a,{value:a,name:"importOptions",options:i,_onChange:n._onChange})),C.default.isOn(t)&&n._renderImportNameField(),C.default.isOn(t)&&n._renderCategories(),r.a.createElement(k.a,{videoListId:"et_pb_portability",trigger:"tooltip"}),r.a.createElement("a",{href:"#",className:"et-fb-save-library-button",onClick:n.onImportLayout},T.importButton))},n._renderImportNameField=function(){return r.a.createElement("div",{className:"et-fb-export-file-name-field"},r.a.createElement("h3",null,T.layoutName),r.a.createElement(_.a,{type:"text",value:n.props.importLayoutName,default:n.props.importLayoutName,name:"importLayoutName",_onChange:n.props._onChange}))},n._renderProgress=function(){return r.a.createElement(y.a,{progress:n.props.importProgress,time_remaining:n.props.importEstimation})},n._renderModalContent=function(){return n.props.preloadingItems&&n.props.importProgress?n._renderProgress():r.a.createElement(b.a,{isLoading:n.props.preloadingItems},n._renderExportTab(),n._renderImportTab())},n.tabs=[{name:"tooltips.export",className:"modules_all"},{name:"tooltips.import",className:"modules_library"}],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),O(t,[{key:"render",value:function(){var e,t=!l()(this.props.maxHeight)&&this.props.maxHeight>0?{maxHeight:this.props.maxHeight}:"";return r.a.createElement("div",{className:"et-fb-main-settings et-fb-main-settings--portability"},(e=this.props)._renderTabs.apply(e,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.tabs)),r.a.createElement("div",{className:"et-fb-settings-options-wrap et_fb_save_module_modal",style:t},r.a.createElement("div",{className:"et-fb-settings-options"},this._renderModalContent())))}}]),t}();D.displayName="ETBuilderPortabilityModal",t.a=Object(E.b)(D)},function(e,t,n){"use strict";var o=n(1),r=n.n(o),i=n(119),a=n.n(i),s=(n(8),n(12)),l=n(3),u=n(32),c=n(0),d=n(18),p=n.n(d),f=n(7),h=n.n(f),g=n(4),m=n.n(g),v=n(13),b=n.n(v),y=n(10),_=n.n(y),k=n(2),w=n.n(k),C=n(87);var E=new C.AllHtmlEntities,S=a()({displayName:"ETBuilderModuleItem",render:function(){if(!l.a.isAllowedAction(this.props.label))return!1;var e,t,n,o=(e={},t=""+this.props.label.replace("et_pb_","et_fb_"),n=!0,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e),i=this.props.specialtyLayout,a="",s="",d="",f="",g="";h()(i)||(a=i.layoutFormat,s=i.layoutType.split(","),d=i.specialtyColumns,g=this.props.label,o.et_fb_specialty_layout_item=!0,f=i.columns.map(function(e,t){var n="et_pb_layout_column",o=t+e;n+=" et_pb_column_layout_"+e;var i="",a="",l="";return"1"===s[t]?(n+=" et_pb_variations et_pb_"+d+"_variations",i=r.a.createElement("div",{className:"et_pb_variation et_pb_variation_full"}),a=r.a.createElement("div",{className:"et_pb_variation_row"},r.a.createElement("div",{className:"et_pb_variation et_pb_variation_1_2"}),r.a.createElement("div",{className:"et_pb_variation et_pb_variation_1_2"})),3===d&&(l="2_3,1_3"===g||"1_3,2_3"===g?r.a.createElement("div",{className:"et_pb_variation_row"},r.a.createElement("div",{className:"et_pb_variation et_pb_variation_1_4"}),r.a.createElement("div",{className:"et_pb_variation et_pb_variation_1_4"}),r.a.createElement("div",{className:"et_pb_variation et_pb_variation_1_4"}),r.a.createElement("div",{className:"et_pb_variation et_pb_variation_1_4"})):r.a.createElement("div",{className:"et_pb_variation_row"},r.a.createElement("div",{className:"et_pb_variation et_pb_variation_1_3"}),r.a.createElement("div",{className:"et_pb_variation et_pb_variation_1_3"}),r.a.createElement("div",{className:"et_pb_variation et_pb_variation_1_3"})))):n+=" et_pb_specialty_column",r.a.createElement("div",{className:n,key:o},i,a,l)}));var m=c.default.hasValue(this.props.iconSvg)?r.a.createElement(u.a,{iconSvg:this.props.iconSvg}):"",v=r.a.createElement("span",{className:"et_module_title"}," ",E.decode(w()(this,"props.title",""))," ");return""!==f&&(v=f),this.props.itemIndex===this.props.selectedItemIndex&&(o["et-fb-selected-item"]=!0),c.default.hasValue(this.props.icon)&&(o["et-fb-has-icon"]=!0),c.default.hasValue(this.props.iconSvg)&&(o["et-fb-has-svg-icon"]=!0),o=b()(o,this.props.classnames),r.a.createElement("li",{className:p()(o),onClick:this._onClick,"data-layout":a,"data-specialty":s,"data-specialty_columns":d,onMouseEnter:this._onMouseEnter,"data-icon":this.props.icon},m,v)},_onClick:function(){(l.a.abIsMode("off")||"layout"!==w()(this,"props.label"))&&("function"==typeof this.props.onClickAction?this.props.onClickAction(this.props):this.performModuleAdding())},_onMouseEnter:function(){m()(this.props.onMouseEnter)||this.props.onMouseEnter(this.props.itemIndex)},performModuleAdding:function(){var e=this.props.specialtyLayout,t=h()(e)?this.props.label:"et_pb_specialty_layout_"+e.layoutFormat,n=h()(e)?"":e.layoutType;if(this.props.savedShortcode){var o={};return b()(o,this.props.savedShortcode[0]),""===this.props.globalID||this.props.isAddingIntoGlobal||(o=this.prepareGlobalModule(o)),"et_pb_row_inner"===this.props.label&&(o.type="et_pb_row_inner"),s.b.insertSavedModule(o),void s.b.cancelTooltip()}s.b.insertNewModule(t,"",n,this.props.fbSupport),"et_fb_specialty"!==this.props.label&&s.b.cancelTooltip()},prepareGlobalModule:function(e,t){var n=this,o=n.props.globalID;return t?e.attrs.global_parent=o:e.attrs.global_module=o,!h()(e.content)&&Array.isArray(e.content)&&_()(e.content,function(e){n.prepareGlobalModule(e,!0)}),e}});t.a=S},function(e,t,n){"use strict";(function(e){var o=n(1),r=n.n(o),i=n(21),a=n.n(i),s=n(18),l=n.n(s),u=n(12),c=n(3),d=n(233),p=n(1117),f=n(474),h=n(10),g=n.n(h),m=n(7),v=n.n(m),b=n(2),y=n.n(b),_=n(4),k=n.n(_),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=ETBuilderBackend.saveModuleLibraryCategories,S=ETBuilderBackend.i18n.saveModuleLibraryAttrs,O=function(t){function n(){var t,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var i=arguments.length,s=Array(i),d=0;d<i;d++)s[d]=arguments[d];return o=r=C(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(s))),r.state={template_name:"",selected_cats:"",make_global:"off",new_category_name:"",name_error:"",sync_error:""},r.setFieldClass=function(){var e={},t=""!==r.state.name_error;return e["et-fb-settings-option-container"]=!0,!0===t&&(e["et-fb-settings-option-container-input-error"]=!0),l()(e)},r.isGlobalOptionSupported=function(){var e=c.a.getModuleLibrarySave();if("root"===e||c.a.isGlobalLibraryPage())return!1;var t=y()(e,"props.attrs");return!!t&&(!t.global_module&&!t.global_parent)},r.getCategoriesNamesArray=function(){var e=E,t=[];return v()(e)||g()(e,function(e){t.push(e.name)}),t},r._onInput=function(e,t){var n=t;switch(e){case"template_name":r.setState({name_error:""===t?"on":""})}r.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,n))},r._onSave=function(t){var n=r.state;t.preventDefault(),""===n.template_name?(r.setState({name_error:"on"}),e(a.a.findDOMNode(r)).animate({scrollTop:0},1e3,"swing"),e(a.a.findDOMNode(r)).find("#et-fb-template_name").focus()):(u.b.performLibraryModuleSaving(n),u.b.cancelTooltip())},C(r,o)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r.a.Component),w(n,[{key:"_renderCategories",value:function(){return 0!==this.getCategoriesNamesArray().length&&r.a.createElement("div",{className:"et-fb-settings-option"},r.a.createElement("label",null,S.addToCatText,":"),r.a.createElement("div",{className:"et-fb-settings-option-container"},r.a.createElement(p.a,{value:this.state.selected_cats,name:"selected_cats",options:this.getCategoriesNamesArray(),shortcut_index:"library-categories",_onChange:this._onInput})))}},{key:"render",value:function(){var e=c.a.getModuleLibrarySave(),t="root"!==e?e.props:e,n=!k()(this.props.maxHeight)&&this.props.maxHeight>0?{maxHeight:this.props.maxHeight}:"",o="",i=void 0;return i="root"===t?S.descriptionTextLayout:S.descriptionText,this.isGlobalOptionSupported()&&(o=r.a.createElement("div",{className:"et-fb-settings-option"},r.a.createElement("label",null,S.globalTitle,":"),r.a.createElement("div",{className:"et-fb-settings-option-container"},r.a.createElement(p.a,{value:this.state.make_global,name:"make_global",options:[S.globalText],shortcut_index:"make-global",_onChange:this._onInput})))),r.a.createElement("div",{className:"et-fb-settings-options-wrap",style:n},r.a.createElement("div",{className:"et-fb-settings-options"},r.a.createElement("p",{className:"et-fb-description-text"},i),r.a.createElement("div",{className:"et-fb-settings-option"},r.a.createElement("label",null,S.templateName,":"),r.a.createElement("div",{className:this.setFieldClass()},r.a.createElement(d.a,{type:"text",value:this.state.template_name,name:"template_name",_onChange:this._onInput}))),o,this._renderCategories(),r.a.createElement("div",{className:"et-fb-settings-option"},r.a.createElement("label",null,S.createCatText,":"),r.a.createElement("div",{className:"et-fb-settings-option-container"},r.a.createElement(d.a,{type:"text",value:this.state.new_category_name,name:"new_category_name",_onChange:this._onInput})),r.a.createElement(f.a,{videoListId:"et_pb_save_to_library",trigger:"tooltip"})),r.a.createElement("a",{href:"#",className:"et-fb-save-library-button",onClick:this._onSave},S.saveText)))}}]),n}();t.a=O}).call(this,n(31))},function(e,t,n){"use strict";var o=n(1),r=n.n(o),i=n(119),a=n.n(i),s=(n(21),n(18)),l=n.n(s),u=n(34),c=n.n(u),d=(n(1326),n(12)),p=(n(55),n(4)),f=n.n(p),h=n(37),g=n.n(h),m=n(10),v=n.n(m),b=n(161),y=n.n(b),_=a()({displayName:"ETBuilderSettingsColumn",mixin:[c.a],render:function(){var e=this,t=this.props.row,n=t.props.section_parent,o=ETBuilderBackend.columnLayouts,i=f()(o[n])?[]:o[n],a="specialty"===n?"":g()(t.props.children,function(e){return e.attrs.type}).join(",");if("specialty"===n){var s=[],u=i[t.props.specialty_layout].columns;v()(y()(u),function(e){var t=[];e+=1;v()(y()(e),function(n){var o=1===e?"4_4":"1_"+e;t.push(o)}),s.push(t.join(","))}),i=s}this.props.setMaxItemIndex(i.length,"modules_all");var c=i.map(function(t,o){var i=t,s=g()(i.split(","),function(e){return e.split("_")}),u={};i===a&&(u["et-fb-column-layout--selected"]=!0),e.props.selectedItemIndex===o+1&&(u["et-fb-selected-item"]=!0),u["et-fb-product-tour-element"]="selectRow"===e.props.currentTourElement&&"1_3,1_3,1_3"===i;var c=s.map(function(e,t){var a={width:parseInt(e[0])/parseInt(e[1])*100+"%"};return r.a.createElement("span",{key:"blocks-"+o+"-"+t,"data-layout":i,className:"column-block-wrap",style:a},r.a.createElement("span",{className:"column-block","data-layout":i,"data-section":n},e[0],"/",e[1]))});return r.a.createElement("li",{className:l()(u),"data-layout":i,onClick:e._onClickAction,onMouseUp:e._onMouseUp,key:"column-"+o},c)});return r.a.createElement("ul",{className:"et-fb-columns-layout"},c)},_onMouseUp:function(e){this._onClickAction(e),d.b.cancelTooltip()},_onClickAction:function(e){var t=e.target.getAttribute("data-layout"),n="specialty"===this.props.row.props.section_parent?"et_pb_row_inner":"et_pb_row";f()(this.props._onClick)?this._changeStructure(e,t):this.props._onClick(t,n)},_changeStructure:function(e,t){e.target.getAttribute("data-layout");d.b.rowColumnChange(this.props.row,t)}});t.a=_},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var o=n(1),r=n.n(o),i=n(5),a=n.n(i),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var l=function(e){var t=e.src,n=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["src"]);return r.a.createElement("video",s({},n,{src:t}))},u=function(e){return r.a.createElement("iframe",e)};u.propTypes={src:a.a.string.isRequired};var c=u,d=n(1158),p=n.n(d),f=n(142),h=n.n(f),g=n(714),m=n.n(g),v=n(1126),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var y=h()(m.a,Object(v.b)("v")),_=function(e){var t,n=e.src,o=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["src"]);return r.a.createElement(c,b({},o,{src:(t=n,Object(v.d)(p()("v",Object(v.c)(t)),"https://www.youtube.com/embed/"+y(t)))}))},k=n(1124),w=n.n(k),C=n(713),E=n.n(C),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var O=h()(w.a,E()("/"),v.a),T=function(e){var t,n=e.src,o=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["src"]);return r.a.createElement(c,S({},o,{src:(t=n,Object(v.d)(Object(v.c)(t),"https://player.vimeo.com/video/"+O(t))),frameBorder:"0"}))},M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var x=h()(w.a,E()("/"),v.a),D=function(e){var t,n=e.src,o=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["src"]);return r.a.createElement(c,M({},o,{src:(t=n,Object(v.d)(Object(v.c)(t),"https://www.dailymotion.com/embed/video/"+x(t))),frameBorder:"0"}))},N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var P=function(e){var t,n=e.src,o=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["src"]),i=function(e){return null!==e.match(/[^\/]+(\/[^\/]+)+\.[a-z|0-9]{2,5}(\?.+)?$/i)}(t=n)?l:function(e){return null!==e.match(/(https?:\/\/)?(www\.)?youtube\.com/i)}(t)?_:function(e){return null!==e.match(/(https?:\/\/)?(www\.)?vimeo\.com/i)}(t)?T:function(e){return null!==e.match(/(https?:\/\/)?(www\.)?dailymotion\.com/i)}(t)?D:c;return r.a.createElement(i,N({},o,{src:n}))};P.propTypes={src:a.a.string.isRequired};t.a=P},function(e,t,n){"use strict";var o=n(1),r=n.n(o),i=n(5),a=n.n(i),s=n(1119),l={MODULE:"module",MODULE_ITEM:"module_item"},u=n(12),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var d=!1,p=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),c(t,[{key:"render",value:function(){return this.props.connectDragSource(this.props.connectDropTarget(r.a.createElement("div",null,r.a.cloneElement(this.props.children,{isDragging:this.props.isDragging}))))}}]),t}();p.propTypes={connectDragSource:a.a.func.isRequired,connectDropTarget:a.a.func.isRequired,moveItem:a.a.func.isRequired,isDragging:a.a.bool.isRequired,id:a.a.any.isRequired};var f={beginDrag:function(e){return{id:e.id}},endDrag:function(e){u.b.moduleItemDragEnd(e,d),d=!1}},h={hover:function(e,t){var n=t.getItem().id;n!==e.id&&(d=!0,e.moveItem(n,e.id))}},g=Object(s.DragSource)(l.MODULE_ITEM,f,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}),m=Object(s.DropTarget)(l.MODULE_ITEM,h,function(e){return{connectDropTarget:e.dropTarget()}});t.a=m(g(p))}])]);
//# sourceMappingURL=modals.4676362f.js.map